# movies-explorer-api

Репозиторий для приложения дипломного проекта `bitfilmsdb`, включающий фронтенд и бэкенд части приложения со следующими возможностями: авторизации и регистрации пользователей, в котором можно найти фильмы по запросу и сохранить в личном кабинете.

### Структура приложения

Полностью приложение состоит из двух частей:

1. movies-explorer-api (бэкенд-часть) ⬅ _этот репозиторий_
2. [movies-explorer-frontend (фронтенд-часть)]

Пожалуйста, прикрепите в это описание ссылку на сайт, размещенный на Яндекс.Облаке.

Адрес репозитория: https://github.com/Newet7/movies-explorer-api

## Ссылки на проект

IP 84.201.176.99

Frontend

Backend http://api.pika.nomoredomainsicu.ru

### _**Дипломный проект Яндекс.Практикума по специальности "Веб-разработчик"**_

#### Этап 2: бэкенд.

#### 1. Подготовка

#### 2. Создайте схемы и модели ресурсов API

#### 3. Создайте роуты и контроллеры

#### 4. Реализуйте аутентификацию и авторизацию

#### 5. Реализуйте логирование

#### 6. Деплой

---

**📄 Чеклисты:**

- [Критерии диплома веб-разработчика](https://code.s3.yandex.net/web-developer/static/new-program/web-diploma-criteria-2.0/index.html)

**🌐 Проект на GitHub Pages:**

- [gh-pages]()

---
## API

### Регистрация пользователя
`POST /signup` - создаёт пользователя с переданными в теле email, password и name

### Аутентификация
`POST /signin` - проверяет переданные в теле почту и пароль и возвращает JWT-токен

### Информация о пользователе
`GET /users/me` - возвращает информацию о пользователе (email и имя)  
`PATCH /users/me` - обновляет информацию о пользователе (email и имя)

### Фильмы
`GET /movies` - возвращает все сохранённые текущим  пользователем фильмы  
`POST /movies` - создаёт фильм с переданными в теле country, director, duration, year, description, image, trailer, nameRU, nameEN и thumbnail, movieId  
`DELETE /movies/_id` - удаляет сохранённый фильм по id  

### Защита роутов авторизацией
Доступ к роутам `/users` и `/movies` закрыт без JWT-токен. Токен должен содержаться в каждом запросе к защищенным роутам:
- заголовок `Authorization`
- значение вида `Bearer eyJh...Xbhc`

## Функциональность
- работа с базой данной приложения через роуты
- регистрация и аутентификация пользователя
- часть роутов защищена авторизацией через JWT-токен
- валидация данных в запросе до передачи контроллеру и перед записью в базу данных
- сбор логов сервера в формате JSON (запросы и ошибки)
- централизованный обработчик ошибок
- хранение пароля пользователя в виде хэша с солью
- поддержка работы с доступом по https
- безопасное хранение на сервере ключа для генерации JWT-токенов
- обеспечение безопасности заголовков запросов
- конфигурация и константы приложения в отдельных файлах
- ограничение числа запросов с одного IP

## Стек технологий
- сервер на `Ubuntu` в Яндекс.Облаке
- ssh-ключи для доступа к серверу
- API-сервер на `Node.js` + `express.js`
- база данных на `MongoDB` + `Mongoose`
- обновление кода на сервере через `Git`
- менеджер процессов на сервере `pm2`
- раздача фронтенда через `nginx`
- обратный прокси-сервер на `nginx`
- файрвол `ufw`
- SSL-сертификаты от `Letsencrypt`

## Статус разработки
Перенести на бесплатный сервер и адрес.
---

👤 **Автор**

**_Федосов_Евгений_**
